<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceEyes Pro - AI Visual Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link" tabindex="1">Skip to main content</a>

    <!-- Header with Accessibility Controls -->
    <header class="header" role="banner">
        <div class="header-content">
            <div class="brand">
                <h1>VoiceEyes Pro</h1>
                <p class="subtitle">Advanced AI Visual Assistant for Accessibility</p>
            </div>
            
            <nav class="accessibility-nav" role="navigation" aria-label="Accessibility controls">
                <button id="darkModeToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="dark-mode-desc"
                        title="Toggle dark mode for better viewing">
                    <span class="btn-icon" aria-hidden="true">ğŸŒ™</span>
                    <span class="btn-text">Dark Mode</span>
                </button>
                <button id="highContrastToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="high-contrast-desc"
                        title="Toggle high contrast mode for better visibility">
                    <span class="btn-icon" aria-hidden="true">ğŸŒ“</span>
                    <span class="btn-text">High Contrast</span>
                </button>
                <button id="fontSizeToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="large-font-desc"
                        title="Toggle large font mode for better readability">
                    <span class="btn-icon" aria-hidden="true">ğŸ”</span>
                    <span class="btn-text">Large Font</span>
                </button>
                <button id="hapticToggle" class="accessibility-btn" 
                        aria-pressed="true" 
                        aria-describedby="haptic-desc"
                        title="Toggle haptic feedback for tactile responses">
                    <span class="btn-icon" aria-hidden="true">ğŸ“³</span>
                    <span class="btn-text">Haptic</span>
                </button>
            </nav>
        </div>
        
        <!-- Hidden descriptions for screen readers -->
        <div id="dark-mode-desc" class="sr-only">Switches between light and dark color themes</div>
        <div id="high-contrast-desc" class="sr-only">Enables high contrast mode for better visibility</div>
        <div id="large-font-desc" class="sr-only">Increases font size for better readability</div>
        <div id="haptic-desc" class="sr-only">Provides vibration feedback for actions</div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        <!-- Camera View - Primary Section -->
        <section class="camera-view" aria-labelledby="camera-heading">
            <h2 id="camera-heading">Camera View</h2>
            <p class="camera-description">Activate your camera to start exploring your environment</p>
            
            <div class="camera-container">
            <div class="camera-viewport">
                <video id="video" 
                       autoplay 
                       muted 
                       playsinline 
                           aria-label="Live camera feed for visual analysis">
                </video>
                <div class="camera-overlay" id="cameraOverlay" aria-hidden="true">
                    <!-- Object detection boxes will be drawn here -->
                </div>
                    <div class="camera-placeholder" id="cameraPlaceholder">
                        <div class="camera-icon">ğŸ“·</div>
            </div>
                </div>
                
                <div class="camera-controls-main">
                    <button id="startCamera" class="btn-camera-primary" 
                            aria-describedby="camera-help"
                            title="Start your device camera to begin visual analysis">
                        <span class="btn-icon" aria-hidden="true">ğŸ“¹</span>
                        Turn On Camera
                    </button>
                    <button id="stopCamera" class="btn-camera-secondary" 
                            disabled
                            style="display: none;"
                            title="Stop the camera and disable analysis">
                        <span class="btn-icon" aria-hidden="true">â¹ï¸</span>
                        Turn Off Camera
                    </button>
                    <button id="switchCamera" class="btn-camera-secondary" 
                            disabled
                            style="display: none;"
                            title="Switch between available cameras">
                        <span class="btn-icon" aria-hidden="true">ğŸ”„</span>
                        Switch Camera
                    </button>
                    <button id="captureBtn" class="btn-camera-primary" 
                            disabled
                            style="display: none;"
                            title="Analyze the current scene with AI">
                        <span class="btn-icon" aria-hidden="true">ğŸ§ </span>
                        Analyze Scene
                    </button>
                </div>
            </div>
        </section>

        <!-- Voice Assistant Controls -->
        <section class="voice-assistant" aria-labelledby="voice-heading">
            <h2 id="voice-heading">Voice Assistant</h2>
            <p class="voice-description">Ask me questions or say "describe scene" to analyze what I see</p>
            
            <div class="voice-controls-main">
                <button id="voiceBtn" class="btn-voice-primary" 
                        disabled 
                        aria-pressed="false"
                        title="Toggle voice command listening">
                    <span class="btn-icon" aria-hidden="true">ğŸ¤</span>
                    Voice Command
                </button>
                <button id="repeatBtn" class="btn-voice-secondary" 
                        disabled 
                        title="Repeat the last AI response">
                    <span class="btn-icon" aria-hidden="true">ğŸ”Š</span>
                    Repeat
                </button>
                <button id="stopSpeakingBtn" class="btn-voice-stop" 
                        style="display: none;"
                        title="Stop current speech">
                    <span class="btn-icon" aria-hidden="true">â¹ï¸</span>
                    Stop Speaking
                </button>
            </div>

            <div class="voice-suggestions">
                <p class="suggestions-label">Try saying:</p>
                <div class="phrase-buttons">
                    <button class="phrase-btn" 
                            data-phrase="describe the scene"
                            title="Ask AI to describe what it sees">
                        Describe the scene
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="what colors do you see"
                            title="Ask AI to identify colors in the scene">
                        What colors do you see?
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="read the text"
                            title="Ask AI to read any text in the scene">
                        Read the text
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="what's in front of me"
                            title="Ask AI to describe what's directly in front">
                        What's in front of me?
                    </button>
                </div>
            </div>
        </section>

        <!-- Analysis Controls -->
        <section class="analysis-controls" aria-labelledby="analysis-heading">
            <h2 id="analysis-heading">Analysis Features</h2>
            <div class="feature-toggles">
                <button id="spatialNav" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable 9-point spatial navigation grid">
                    <span class="toggle-icon">ğŸ§­</span>
                    <span class="toggle-label">Spatial Nav</span>
                </button>
                <button id="distanceMode" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable distance estimation for objects">
                    <span class="toggle-icon">ğŸ“</span>
                    <span class="toggle-label">Distance</span>
                </button>
                <button id="obstacleMode" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable obstacle detection and warnings">
                    <span class="toggle-icon">âš ï¸</span>
                    <span class="toggle-label">Obstacles</span>
                </button>
                <button id="contrastMode" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Analyze color contrast for accessibility">
                    <span class="toggle-icon">ğŸ¨</span>
                    <span class="toggle-label">Contrast</span>
                </button>
                <button id="readabilityMode" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Analyze text readability and clarity">
                    <span class="toggle-icon">ğŸ“–</span>
                    <span class="toggle-label">Text</span>
                </button>
                <button id="lightingMode" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Analyze lighting conditions and brightness">
                    <span class="toggle-icon">ğŸ’¡</span>
                    <span class="toggle-label">Lighting</span>
                </button>
                <button id="audioBeacon" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable directional audio beacons">
                    <span class="toggle-icon">ğŸ”Š</span>
                    <span class="toggle-label">Audio</span>
                </button>
                <button id="voiceNav" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable voice navigation commands">
                    <span class="toggle-icon">ğŸ—£ï¸</span>
                    <span class="toggle-label">Voice Nav</span>
                </button>
                <button id="soundscape" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Enable environmental soundscape">
                    <span class="toggle-icon">ğŸŒŠ</span>
                    <span class="toggle-label">Soundscape</span>
                </button>
            </div>
        </section>

        <!-- Accessibility Controls -->
        <section class="accessibility-controls" aria-labelledby="accessibility-heading">
            <h2 id="accessibility-heading">Accessibility Settings</h2>
            <div class="accessibility-toggles">
                <button id="darkModeToggle" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Toggle dark mode">
                    <span class="toggle-icon">ğŸŒ™</span>
                    <span class="toggle-label">Dark Mode</span>
                </button>
                <button id="highContrastToggle" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Toggle high contrast mode">
                    <span class="toggle-icon">ğŸ”†</span>
                    <span class="toggle-label">High Contrast</span>
                </button>
                <button id="fontSizeToggle" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Toggle large font size">
                    <span class="toggle-icon">ğŸ”</span>
                    <span class="toggle-label">Large Text</span>
                </button>
                <button id="hapticToggle" class="feature-toggle" 
                        aria-pressed="false" 
                        title="Toggle haptic feedback">
                    <span class="toggle-icon">ğŸ“³</span>
                    <span class="toggle-label">Haptic</span>
                </button>
            </div>
        </section>

        <!-- Spatial Navigation Panel -->
        <div class="spatial-panel" id="spatialPanel" style="display: none;" 
             role="region" 
             aria-labelledby="spatial-nav-title">
            <h3 id="spatial-nav-title">Spatial Navigation</h3>
            <div class="navigation-grid" id="navigationGrid" role="grid">
                <!-- Navigation points will be generated here -->
            </div>
            <div class="navigation-controls">
                <button class="nav-btn" id="scanLeft" title="Scan left side">
                    <span class="btn-icon">â¬…ï¸</span>
                    Left
                </button>
                <button class="nav-btn" id="scanCenter" title="Scan center">
                    <span class="btn-icon">â¬†ï¸</span>
                    Center
                </button>
                <button class="nav-btn" id="scanRight" title="Scan right side">
                    <span class="btn-icon">â¡ï¸</span>
                    Right
                </button>
            </div>
        </div>

        <!-- Hidden descriptions for screen readers -->
        <div id="spatial-nav-desc" class="sr-only">9-point spatial navigation grid for precise object location</div>
        <div id="distance-desc" class="sr-only">AI-powered distance estimation for safe navigation</div>
        <div id="obstacle-desc" class="sr-only">Real-time obstacle detection and safety warnings</div>
        <div id="contrast-desc" class="sr-only">Advanced color contrast analysis for accessibility</div>
        <div id="readability-desc" class="sr-only">Text readability and clarity analysis</div>
        <div id="lighting-desc" class="sr-only">Lighting conditions and brightness analysis</div>
        <div id="beacon-desc" class="sr-only">Directional audio beacons for spatial awareness</div>
        <div id="voice-desc" class="sr-only">Voice command navigation and control</div>
        <div id="soundscape-desc" class="sr-only">Environmental soundscape for enhanced awareness</div>

        <!-- Status and Description -->
        <div class="status" id="status" role="status" aria-live="polite" aria-atomic="true">
            Click "Turn On Camera" to begin
        </div>

        <div class="description-box" id="description" aria-live="polite">
            Descriptions will appear here...
        </div>
    </main>

    <!-- Mobile Camera Controls Modal -->
    <div class="mobile-camera-controls" id="mobileControls" style="display: none;">
        <div class="mobile-controls-content">
            <h3>ğŸ“± Mobile Gestures</h3>
            <div class="gesture-list">
                <div class="gesture-item">
                    <span class="gesture-icon">ğŸ‘†</span>
                    <span class="gesture-text">Double tap to capture</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">ğŸ‘†</span>
                    <span class="gesture-text">Long press for voice command</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">ğŸ“±</span>
                    <span class="gesture-text">Shake device to capture</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">ğŸ¤</span>
                    <span class="gesture-text">Pinch to change modes</span>
                </div>
            </div>
            <button class="btn btn-primary" onclick="this.parentElement.parentElement.style.display='none'">
                Got it!
            </button>
        </div>
    </div>

    <!-- Camera Selector Modal -->
    <div class="camera-selector-modal" id="cameraSelector" style="display: none;">
        <div class="camera-selector-content">
            <h3>ğŸ“· Select Camera</h3>
            <div class="camera-list" id="cameraList">
                <!-- Camera options will be populated here -->
            </div>
            <button class="btn btn-secondary" onclick="document.getElementById('cameraSelector').style.display='none'">
                Cancel
            </button>
        </div>
    </div>

    <!-- Permission Help Modal -->
    <div class="permission-help-modal" id="permissionHelp" style="display: none;">
        <div class="permission-help-content">
            <h3>ğŸ“· Camera Permission Required</h3>
            <p>VoiceEyes Pro needs camera access to analyze your environment. Please:</p>
            <ol>
                <li>Click "Allow" when prompted for camera permission</li>
                <li>Refresh the page if you accidentally denied permission</li>
                <li>Check your browser settings if issues persist</li>
            </ol>
            <button class="btn btn-primary" onclick="document.getElementById('permissionHelp').style.display='none'">
                I understand
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>