<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceEyes Pro - AI Visual Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link" tabindex="1">Skip to main content</a>

    <!-- Header with Accessibility Controls -->
    <header class="header" role="banner">
        <div class="header-content">
            <div class="brand">
                <h1>VoiceEyes Pro</h1>
                <p class="subtitle">Advanced AI Visual Assistant for Accessibility</p>
            </div>
            
            <nav class="accessibility-nav" role="navigation" aria-label="Accessibility controls">
                <button id="darkModeToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="dark-mode-desc"
                        title="Toggle dark mode for better viewing">
                    <span class="btn-icon" aria-hidden="true">🌙</span>
                    <span class="btn-text">Dark Mode</span>
                </button>
                <button id="highContrastToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="high-contrast-desc"
                        title="Toggle high contrast mode for better visibility">
                    <span class="btn-icon" aria-hidden="true">🌓</span>
                    <span class="btn-text">High Contrast</span>
                </button>
                <button id="fontSizeToggle" class="accessibility-btn" 
                        aria-pressed="false" 
                        aria-describedby="large-font-desc"
                        title="Toggle large font mode for better readability">
                    <span class="btn-icon" aria-hidden="true">🔍</span>
                    <span class="btn-text">Large Font</span>
                </button>
                <button id="hapticToggle" class="accessibility-btn" 
                        aria-pressed="true" 
                        aria-describedby="haptic-desc"
                        title="Toggle haptic feedback for tactile responses">
                    <span class="btn-icon" aria-hidden="true">📳</span>
                    <span class="btn-text">Haptic</span>
                </button>
            </nav>
        </div>
        
        <!-- Hidden descriptions for screen readers -->
        <div id="dark-mode-desc" class="sr-only">Switches between light and dark color themes</div>
        <div id="high-contrast-desc" class="sr-only">Enables high contrast mode for better visibility</div>
        <div id="large-font-desc" class="sr-only">Increases font size for better readability</div>
        <div id="haptic-desc" class="sr-only">Provides vibration feedback for actions</div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        <!-- Quick Start Section -->
        <section class="quick-start" aria-labelledby="quick-start-heading">
            <h2 id="quick-start-heading">Quick Start</h2>
            <div class="start-actions">
                <button id="startCamera" class="btn btn-primary btn-large" 
                        aria-describedby="camera-help"
                        title="Start your device camera to begin visual analysis">
                    <span class="btn-icon" aria-hidden="true">📹</span>
                    Start Camera
                </button>
                <p id="camera-help" class="help-text">Allow camera access to begin using VoiceEyes Pro</p>
            </div>
        </section>

        <!-- Feature Categories -->
        <div class="feature-categories">
            <!-- Smart Navigation -->
            <section class="feature-category" aria-labelledby="navigation-heading">
                <h3 id="navigation-heading" class="category-title">
                    <span class="category-icon" aria-hidden="true">🧭</span>
                    Smart Navigation
                </h3>
                <div class="feature-buttons" role="group" aria-labelledby="navigation-heading">
                    <button id="spatialNav" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="spatial-nav-desc"
                            title="Enable 9-point spatial navigation grid">
                        <span class="btn-icon" aria-hidden="true">🧭</span>
                        <span class="btn-text">Spatial Nav</span>
                    </button>
                    <button id="distanceMode" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="distance-desc"
                            title="Enable distance estimation for objects">
                        <span class="btn-icon" aria-hidden="true">📏</span>
                        <span class="btn-text">Distance</span>
                    </button>
                    <button id="obstacleMode" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="obstacle-desc"
                            title="Enable obstacle detection and warnings">
                        <span class="btn-icon" aria-hidden="true">⚠️</span>
                        <span class="btn-text">Obstacles</span>
                    </button>
                </div>
            </section>

            <!-- Visual Analysis -->
            <section class="feature-category" aria-labelledby="visual-heading">
                <h3 id="visual-heading" class="category-title">
                    <span class="category-icon" aria-hidden="true">🎨</span>
                    Visual Analysis
                </h3>
                <div class="feature-buttons" role="group" aria-labelledby="visual-heading">
                    <button id="contrastMode" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="contrast-desc"
                            title="Analyze color contrast for accessibility">
                        <span class="btn-icon" aria-hidden="true">🎨</span>
                        <span class="btn-text">Contrast</span>
                    </button>
                    <button id="readabilityMode" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="readability-desc"
                            title="Analyze text readability and clarity">
                        <span class="btn-icon" aria-hidden="true">📖</span>
                        <span class="btn-text">Readability</span>
                    </button>
                    <button id="lightingMode" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="lighting-desc"
                            title="Analyze lighting conditions and brightness">
                        <span class="btn-icon" aria-hidden="true">💡</span>
                        <span class="btn-text">Lighting</span>
                    </button>
                </div>
            </section>

            <!-- Audio Features -->
            <section class="feature-category" aria-labelledby="audio-heading">
                <h3 id="audio-heading" class="category-title">
                    <span class="category-icon" aria-hidden="true">🔊</span>
                    Audio Features
                </h3>
                <div class="feature-buttons" role="group" aria-labelledby="audio-heading">
                    <button id="audioBeacon" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="beacon-desc"
                            title="Enable directional audio beacons">
                        <span class="btn-icon" aria-hidden="true">🔊</span>
                        <span class="btn-text">Beacons</span>
                    </button>
                    <button id="voiceNav" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="voice-desc"
                            title="Enable voice command navigation">
                        <span class="btn-icon" aria-hidden="true">🗣️</span>
                        <span class="btn-text">Voice Nav</span>
                    </button>
                    <button id="soundscape" class="feature-btn" 
                            aria-pressed="false" 
                            aria-describedby="soundscape-desc"
                            title="Enable environmental soundscape">
                        <span class="btn-icon" aria-hidden="true">🌿</span>
                        <span class="btn-text">Soundscape</span>
                    </button>
                </div>
            </section>
        </div>

        <!-- Hidden descriptions for screen readers -->
        <div id="spatial-nav-desc" class="sr-only">9-point spatial navigation grid for precise object location</div>
        <div id="distance-desc" class="sr-only">AI-powered distance estimation for safe navigation</div>
        <div id="obstacle-desc" class="sr-only">Real-time obstacle detection and safety warnings</div>
        <div id="contrast-desc" class="sr-only">Advanced color contrast analysis for accessibility</div>
        <div id="readability-desc" class="sr-only">Text readability and clarity analysis</div>
        <div id="lighting-desc" class="sr-only">Lighting conditions and brightness analysis</div>
        <div id="beacon-desc" class="sr-only">Directional audio beacons for spatial awareness</div>
        <div id="voice-desc" class="sr-only">Voice command navigation and control</div>
        <div id="soundscape-desc" class="sr-only">Environmental soundscape for enhanced awareness</div>

        <!-- Camera Interface -->
        <section class="camera-interface" aria-labelledby="camera-heading">
            <h2 id="camera-heading">Camera Interface</h2>
            
            <div class="camera-status">
                <div class="status-indicator" id="modeIndicator" role="status" aria-live="polite">
                    <span class="status-icon" aria-hidden="true">📹</span>
                    <span class="status-text">Ready</span>
                </div>
                <div class="camera-stats" id="cameraStats" aria-live="polite">
                    <div class="stat">
                        <span class="stat-label">Objects detected:</span>
                        <span class="stat-value" id="objectCount" aria-label="Number of objects detected">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Distance:</span>
                        <span class="stat-value" id="distanceValue" aria-label="Estimated distance to objects">N/A</span>
                    </div>
                </div>
            </div>

            <div class="camera-viewport">
                <video id="video" 
                       autoplay 
                       muted 
                       playsinline 
                       aria-label="Live camera feed for visual analysis"
                       aria-describedby="camera-description">
                </video>
                <div class="camera-overlay" id="cameraOverlay" aria-hidden="true">
                    <!-- Object detection boxes will be drawn here -->
                </div>
                <p id="camera-description" class="sr-only">Live camera feed showing your environment for AI analysis</p>
            </div>

            <!-- Camera Controls -->
            <div class="camera-controls" role="group" aria-label="Camera controls">
                <button id="switchCamera" class="btn btn-secondary" 
                        disabled
                        aria-describedby="switch-camera-desc"
                        title="Switch between available cameras">
                    <span class="btn-icon" aria-hidden="true">🔄</span>
                    Switch Camera
                </button>
                <button id="captureBtn" class="btn btn-primary btn-large" 
                        disabled 
                        aria-describedby="analyze-desc"
                        title="Analyze the current scene with AI">
                    <span class="btn-icon" aria-hidden="true">🧠</span>
                    Analyze Scene
                </button>
            </div>

            <!-- Spatial Navigation Panel -->
            <div class="spatial-panel" id="spatialPanel" style="display: none;" 
                 role="region" 
                 aria-labelledby="spatial-nav-title"
                 aria-describedby="spatial-nav-desc">
                <h3 id="spatial-nav-title">Spatial Navigation</h3>
                <p id="spatial-nav-desc" class="sr-only">9-point navigation grid for precise object location</p>
                <div class="navigation-grid" id="navigationGrid" role="grid" aria-label="Spatial navigation grid">
                    <!-- Navigation points will be generated here -->
                </div>
                <div class="navigation-controls" role="group" aria-label="Directional scanning">
                    <button class="nav-btn" id="scanLeft" 
                            aria-label="Scan left side of the scene"
                            title="Scan left side of the scene">
                        <span class="btn-icon" aria-hidden="true">⬅️</span>
                        Left
                    </button>
                    <button class="nav-btn" id="scanCenter" 
                            aria-label="Scan center of the scene"
                            title="Scan center of the scene">
                        <span class="btn-icon" aria-hidden="true">⬆️</span>
                        Center
                    </button>
                    <button class="nav-btn" id="scanRight" 
                            aria-label="Scan right side of the scene"
                            title="Scan right side of the scene">
                        <span class="btn-icon" aria-hidden="true">➡️</span>
                        Right
                    </button>
                </div>
            </div>
        </section>

        <!-- Voice Interface -->
        <section class="voice-interface" aria-labelledby="voice-heading">
            <h2 id="voice-heading">Voice Commands</h2>
            
            <div class="voice-controls" role="group" aria-label="Voice controls">
                <button id="voiceBtn" class="btn btn-secondary" 
                        disabled 
                        aria-pressed="false"
                        aria-describedby="voice-desc"
                        title="Toggle voice command listening">
                    <span class="btn-icon" aria-hidden="true">🎤</span>
                    Voice Commands
                </button>
                <button id="repeatBtn" class="btn btn-outline" 
                        disabled 
                        aria-describedby="repeat-desc"
                        title="Repeat the last AI response">
                    <span class="btn-icon" aria-hidden="true">🔄</span>
                    Repeat
                </button>
            </div>

            <div class="voice-suggestions">
                <h3>Try saying:</h3>
                <div class="phrase-buttons" role="group" aria-label="Suggested voice commands">
                    <button class="phrase-btn" 
                            data-phrase="describe the scene"
                            aria-describedby="describe-desc"
                            title="Ask AI to describe what it sees">
                        What do you see?
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="read the text"
                            aria-describedby="read-desc"
                            title="Ask AI to read any text in the scene">
                        Read the text
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="what colors do you see"
                            aria-describedby="colors-desc"
                            title="Ask AI to identify colors in the scene">
                        What colors do you see?
                    </button>
                    <button class="phrase-btn" 
                            data-phrase="what's in front of me"
                            aria-describedby="front-desc"
                            title="Ask AI to describe what's directly in front">
                        What's in front of me?
                    </button>
                </div>
            </div>

            <!-- Hidden descriptions for screen readers -->
            <div id="switch-camera-desc" class="sr-only">Switch between available cameras on your device</div>
            <div id="analyze-desc" class="sr-only">Analyze the current scene with AI vision</div>
            <div id="voice-desc" class="sr-only">Enable voice command listening mode</div>
            <div id="repeat-desc" class="sr-only">Repeat the last AI response</div>
            <div id="describe-desc" class="sr-only">Ask AI to describe the current scene</div>
            <div id="read-desc" class="sr-only">Ask AI to read any text visible in the scene</div>
            <div id="colors-desc" class="sr-only">Ask AI to identify colors in the scene</div>
            <div id="front-desc" class="sr-only">Ask AI to describe what's directly in front of you</div>
        </section>

        <!-- Status and Description -->
        <div class="status" id="status" role="status" aria-live="polite" aria-atomic="true">
            Click "Start Camera" to begin
        </div>

        <div class="description-box" id="description" aria-live="polite">
            Descriptions will appear here...
        </div>

        <!-- Accessibility Info -->
        <section class="accessibility-info" aria-labelledby="accessibility-heading">
            <h2 id="accessibility-heading">♿ Accessibility Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>🎯 Smart Navigation</h3>
                    <p>9-point spatial grid for precise object location and navigation assistance.</p>
                </div>
                <div class="feature-card">
                    <h3>📏 Distance Estimation</h3>
                    <p>AI-powered distance calculation for safe navigation and spatial awareness.</p>
                </div>
                <div class="feature-card">
                    <h3>⚠️ Obstacle Detection</h3>
                    <p>Real-time identification of potential obstacles and safety hazards.</p>
                </div>
                <div class="feature-card">
                    <h3>🎨 Visual Analysis</h3>
                    <p>Advanced contrast, readability, and lighting analysis for optimal visibility.</p>
                </div>
                <div class="feature-card">
                    <h3>🔊 Audio Beacons</h3>
                    <p>Directional sound cues and environmental soundscapes for enhanced awareness.</p>
                </div>
                <div class="feature-card">
                    <h3>📳 Haptic Feedback</h3>
                    <p>Vibration patterns for tactile feedback and confirmation of actions.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Mobile Camera Controls Modal -->
    <div class="mobile-camera-controls" id="mobileControls" style="display: none;">
        <div class="mobile-controls-content">
            <h3>📱 Mobile Gestures</h3>
            <div class="gesture-list">
                <div class="gesture-item">
                    <span class="gesture-icon">👆</span>
                    <span class="gesture-text">Double tap to capture</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">👆</span>
                    <span class="gesture-text">Long press for voice command</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">📱</span>
                    <span class="gesture-text">Shake device to capture</span>
                </div>
                <div class="gesture-item">
                    <span class="gesture-icon">🤏</span>
                    <span class="gesture-text">Pinch to change modes</span>
                </div>
            </div>
            <button class="btn btn-primary" onclick="this.parentElement.parentElement.style.display='none'">
                Got it!
            </button>
        </div>
    </div>

    <!-- Camera Selector Modal -->
    <div class="camera-selector-modal" id="cameraSelector" style="display: none;">
        <div class="camera-selector-content">
            <h3>📷 Select Camera</h3>
            <div class="camera-list" id="cameraList">
                <!-- Camera options will be populated here -->
            </div>
            <button class="btn btn-secondary" onclick="document.getElementById('cameraSelector').style.display='none'">
                Cancel
            </button>
        </div>
    </div>

    <!-- Permission Help Modal -->
    <div class="permission-help-modal" id="permissionHelp" style="display: none;">
        <div class="permission-help-content">
            <h3>📷 Camera Permission Required</h3>
            <p>VoiceEyes Pro needs camera access to analyze your environment. Please:</p>
            <ol>
                <li>Click "Allow" when prompted for camera permission</li>
                <li>Refresh the page if you accidentally denied permission</li>
                <li>Check your browser settings if issues persist</li>
            </ol>
            <button class="btn btn-primary" onclick="document.getElementById('permissionHelp').style.display='none'">
                I understand
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>